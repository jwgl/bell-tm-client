<ng-container *ngIf="vm">
    <div class="btn-toolbar">
        <div class="ml-auto">
            <button class="btn btn-secondary" routerLink="../">返回</button>
            <button class="btn btn-secondary ml-2" routerLink="edit" *ngIf="createAble">编辑</button>
            <button class="btn btn-secondary ml-2" routerLink="plan" *ngIf="createAble && planAble">计划</button>
            <button class="btn btn-secondary ml-2" (click)="setting()" *ngIf="!createAble">编辑</button>
            <button class="btn btn-secondary ml-2" (click)="labelCreate()" >新建标签名</button>
            <button class="btn btn-primary" (click)="labelling()" >使用标签</button>
        </div>
    </div>
    <tm-place-form-viewer [vm]="vm" [labelAdmin]="createAble" [userId]="userId" [labels]="labels"></tm-place-form-viewer>
    <div class="btn-toolbar" *ngIf="!selectedPicture">
        <button class="btn btn-success ml-auto" type="button" (click)="onCreatePicture()">上传照片</button>
    </div>
    <tm-picture-editor *ngIf="selectedPicture; else viewerTpl"
        mode="create"
        [pictures]="pictures"
        [pictureUrl]="pictureUrl"
        (confirm)="onPictureCreated($event)"
        (cancel)="onPictureCanceled($event)">
    </tm-picture-editor>
    <ng-template #viewerTpl>
        <tm-picture-viewer
            [pictures]="pictures"
            [editable]="true"
            [pictureUrl]="pictureUrl"
            (edit)="onEditPicture(pictures)">
        </tm-picture-viewer>
    </ng-template>
</ng-container>
